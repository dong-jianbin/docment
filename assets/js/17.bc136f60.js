(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{333:function(t,s,e){"use strict";e.r(s);var v=e(3),_=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("利用网络上公开的数据构建一个小型的证券知识图谱/知识库")]),t._v(" "),s("h3",{attrs:{id:"项目准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目准备"}},[t._v("#")]),t._v(" 项目准备")]),t._v(" "),s("p",[t._v("项目地址")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/lemonhu/stock-knowledge-graph",target:"_blank",rel:"noopener noreferrer"}},[t._v("项目地址：https://github.com/lemonhu/stock-knowledge-graph"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("项目下载")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /Users/mac/IdeaProjects/kg\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone git@github.com:lemonhu/stock-knowledge-graph.git\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("环境设置")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /Users/mac/IdeaProjects/kg/stock-knowledge-graph\npip3 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -r requirements.txt\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"工程目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工程目录结构"}},[t._v("#")]),t._v(" 工程目录结构")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220314115836.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"数据源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据源"}},[t._v("#")]),t._v(" 数据源")]),t._v(" "),s("p",[t._v("本项目需要用到两种数据源：一种是公司董事信息，另一种是股票的行业以及概念信息。")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("公司董事信息")])]),t._v(" "),s("p",[t._v("这部分数据包含在"),s("code",[t._v("data")]),t._v("目录下的"),s("code",[t._v("stockpage")]),t._v("压缩文件中，⾥面的每一个文件是以"),s("code",[t._v("XXXXXX.html")]),t._v("命名，其中"),s("code",[t._v("XXXXXX")]),t._v("是股票代码。这部分数据是由"),s("a",{attrs:{href:"http://stockpage.10jqka.com.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("同花顺个股"),s("OutboundLink")],1),t._v("的⽹页爬取而来的，执行解压缩命令"),s("code",[t._v("unzip stockpage.zip")]),t._v("即可获取。比如对于"),s("code",[t._v("600007.html")]),t._v("，这部分内容来自于http://stockpage.10jqka.com.cn/600007/company/#manager")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("股票行业以及概念信息")])]),t._v(" "),s("p",[t._v("这部分信息也可以通过⽹上公开的信息得到。在这里，我们使用"),s("a",{attrs:{href:"http://tushare.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tushare"),s("OutboundLink")],1),t._v("工具来获得，详细细节见之后具体的任务部分。")])]),t._v(" "),s("li",[s("p",[t._v("Excel文件中文乱码")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 executive_prep.csv > executive_prep_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 stock_concept_prep.csv > stock_concept_prep_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 stock_industry_prep.csv > stock_industry_prep_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 concept.csv > concept_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 executive.csv > executive_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 industry.csv > industry_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 stock.csv > stock_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 executive_stock.csv > executive_stock_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 stock_concept.csv > stock_concept_new.csv")]),t._v(" "),s("p",[t._v("iconv -f UTF-8 -t GB18030 stock_industry.csv > stock_industry_new.csv")])])]),t._v(" "),s("h2",{attrs:{id:"任务1-从网页中抽取董事会的信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务1-从网页中抽取董事会的信息"}},[t._v("#")]),t._v(" 任务1：从⽹页中抽取董事会的信息")]),t._v(" "),s("p",[t._v("在我们给定的html文件中，需要对每一个股票/公司抽取董事会成员的信息，这部分信息包括董事会成员“姓名”、“职务”、“性别”、“年龄”共四个字段。首先，姓名和职务的字段来自于：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220313173800.png",alt:""}}),t._v(")")]),t._v(" "),s("p",[t._v("在这里总共有12位董事成员的信息，都需要抽取出来。另外，性别和年龄字段也可以从下附图里抽取出来：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220314120844.png",alt:""}})]),t._v(" "),s("p",[t._v("最后，生成一个 "),s("code",[t._v("executive_prep.csv")]),t._v("文件，格式如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("高管姓名")]),t._v(" "),s("th",[t._v("性别")]),t._v(" "),s("th",[t._v("年龄")]),t._v(" "),s("th",[t._v("股票代码")]),t._v(" "),s("th",[t._v("职位")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("朴明志")]),t._v(" "),s("td",[t._v("男")]),t._v(" "),s("td",[t._v("51")]),t._v(" "),s("td",[t._v("600007")]),t._v(" "),s("td",[t._v("董事⻓/董事")])]),t._v(" "),s("tr",[s("td",[t._v("高燕")]),t._v(" "),s("td",[t._v("女")]),t._v(" "),s("td",[t._v("60")]),t._v(" "),s("td",[t._v("600007")]),t._v(" "),s("td",[t._v("执⾏董事")])]),t._v(" "),s("tr",[s("td",[t._v("刘永政")]),t._v(" "),s("td",[t._v("男")]),t._v(" "),s("td",[t._v("50")]),t._v(" "),s("td",[t._v("600008")]),t._v(" "),s("td",[t._v("董事⻓/董事")])]),t._v(" "),s("tr",[s("td",[t._v("···")]),t._v(" "),s("td",[t._v("···")]),t._v(" "),s("td",[t._v("···")]),t._v(" "),s("td",[t._v("···")]),t._v(" "),s("td",[t._v("···")])])])]),t._v(" "),s("p",[t._v("注：建议表头最好用相应的英文表示。")]),t._v(" "),s("h2",{attrs:{id:"任务2-获取股票行业和概念的信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务2-获取股票行业和概念的信息"}},[t._v("#")]),t._v(" 任务2：获取股票行业和概念的信息")]),t._v(" "),s("p",[t._v("对于这部分信息，我们可以利⽤工具"),s("code",[t._v("Tushare")]),t._v("来获取，官网为http://tushare.org/ ，使用pip命令进行安装即可。下载完之后，在python里即可调用股票行业和概念信息。参考链接：http://tushare.org/classifying.html#id2")]),t._v(" "),s("p",[t._v("通过以下的代码即可获得股票行业信息，并把返回的信息直接存储在"),s("code",[t._v("stock_industry_prep.csv")]),t._v("文件里。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('import tushare as ts\ndf = ts.get_industry_classified()\n# TODO 保存到"stock_industry_prep.csv"\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("类似的，可以通过以下代码即可获得股票概念信息，并把它们存储在"),s("code",[t._v("stock_concept_prep.csv")]),t._v("文件里。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("df = ts.get_concept_classified()\n# TODO 保存到“stock_concept_prep.csv”\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=_.exports}}]);