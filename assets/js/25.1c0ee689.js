(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{341:function(s,a,t){"use strict";t.r(a);var n=t(3),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"hadoop概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop概述"}},[s._v("#")]),s._v(" Hadoop概述")]),s._v(" "),a("h3",{attrs:{id:"hadoop是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop是什么"}},[s._v("#")]),s._v(" Hadoop是什么")]),s._v(" "),a("ol",[a("li",[s._v("Hadoop是一个有Apache基金会所开发的==分布式系统基础框架==")]),s._v(" "),a("li",[s._v("主要解决，海量数据的==存储==和海量数据的==分析计算==问题")]),s._v(" "),a("li",[s._v("广义上的说，Hadoop通常是指一个更广泛的概念--==Hadoop生态圈==")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513124104.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"hadoop发展历史"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop发展历史"}},[s._v("#")]),s._v(" Hadoop发展历史")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("Lucene框架是Doug Cutting开创的开源软件，用Java书写代码，实现与Google类似的全文搜索功能，它提供了全文检索引擎的架构，包括完整的查询引擎和索引引擎。")])]),s._v(" "),a("li",[a("p",[s._v("2001年年底Lucene成为Apache基金会的一个子项目。")])]),s._v(" "),a("li",[a("p",[s._v("对于海量数据的场景，Lucene面对与Google同样的困难，"),a("strong",[s._v("存储数据困难，检索速度慢")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("学习和模仿Google解决这些问题的办法 ：微型版Nutch。")])]),s._v(" "),a("li",[a("p",[s._v("可以说Google是Hadoop的思想之源(Google在大数据方面的三篇论文)")]),s._v(" "),a("p",[a("strong",[s._v("GFS —>HDFS")])]),s._v(" "),a("p",[a("strong",[s._v("Map-Reduce —>MR")])]),s._v(" "),a("p",[a("strong",[s._v("BigTable —> HBase")])])]),s._v(" "),a("li",[a("p",[s._v("2003-2004年，Google公开了部分GFS和MapReduce思想的细节，以此为基础Doug Cutting等人用了"),a("strong",[s._v("2****年业余时间")]),s._v("实现了DFS和MapReduce机制，使Nutch性能飙升。")])]),s._v(" "),a("li",[a("p",[s._v("2005 年Hadoop 作为 Lucene的子项目 Nutch的一部分正式引入Apache基金会。")])]),s._v(" "),a("li",[a("p",[s._v("2006 年 3 月份，Map-Reduce和Nutch Distributed File System (NDFS) 分别被纳入到 Hadoop 项目中，Hadoop就此正式诞生，标志着大数据时代来临。")])]),s._v(" "),a("li",[a("p",[s._v("名字来源于Doug Cutting儿子的玩具大象。")])])]),s._v(" "),a("h3",{attrs:{id:"hadoop三大发行版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop三大发行版本"}},[s._v("#")]),s._v(" Hadoop三大发行版本")]),s._v(" "),a("p",[s._v("Hadoop三大发行版本："),a("strong",[s._v("Apache")]),s._v("、"),a("strong",[s._v("Cloudera")]),s._v("、"),a("strong",[s._v("Hortonworks")])]),s._v(" "),a("p",[s._v("Apache版本最原始（最基础）的版本，对于入门学习最好。2006")]),s._v(" "),a("p",[s._v("Cloudera内部集成了很多大数据框架，对应产品CDH。2008")]),s._v(" "),a("p",[s._v("Hortonworks文档较好，对应产品HDP。2011")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("Apache Hadoop")])]),s._v(" "),a("p",[s._v("官网地址：http://hadoop.apache.org")]),s._v(" "),a("p",[s._v("下载地址：https://hadoop.apache.org/releases.html")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("Cloudera Hadoop")])]),s._v(" "),a("p",[s._v("官网地址：https://www.cloudera.com/downloads/cdh")]),s._v(" "),a("p",[s._v("下载地址：https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_download.html")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("2008年成立的Cloudera是最早将Hadoop商用的公司，为合作伙伴提供Hadoop的商用解决方案，主要是包括支持、咨询服务、培训。")])]),s._v(" "),a("li",[a("p",[s._v("200年Hadoop的创始人Doug Cutting也加盟Cloudera公司。Cloudera产品主要为CDH，Cloudera Manager，Cloudera Support")])]),s._v(" "),a("li",[a("p",[s._v("CDH是Cloudera的Hadoop发行版，完全开源，比Apache Hadoop在兼容性，安全性，稳定性上有所增强。Cloudera的标价为每年每个节点"),a("strong",[s._v("10000")]),s._v("美元。")])]),s._v(" "),a("li",[a("p",[s._v("Cloudera Manager是集群的软件分发及管理监控平台，可以在几个小时内部署好一个Hadoop集群，并对集群的节点及服务进行实时监控。")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("Hortonworks Hadoop")])]),s._v(" "),a("p",[s._v("官网地址：https://hortonworks.com/products/data-center/hdp/")]),s._v(" "),a("p",[s._v("下载地址：https://hortonworks.com/downloads/#data-platform")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("2011年成立的Hortonworks是雅虎与硅谷风投公司Benchmark Capital合资组建。")])]),s._v(" "),a("li",[a("p",[s._v("公司成立之初就吸纳了大约"),a("strong",[s._v("25")]),s._v("名至"),a("strong",[s._v("30")]),s._v("名专门研究"),a("strong",[s._v("Hadoop")]),s._v("的雅虎工程师，上述工程师均在"),a("strong",[s._v("2005")]),s._v("年开始协助雅虎开发"),a("strong",[s._v("Hadoop")]),s._v("，贡献了**Hadoop80%**的代码。")])]),s._v(" "),a("li",[a("p",[s._v("Hortonworks的主打产品是Hortonworks Data Platform（HDP），也同样是100%开源的产品，HDP除常见的项目外还包括了"),a("strong",[s._v("Ambari")]),s._v("，一款开源的安装和管理系统。")])]),s._v(" "),a("li",[a("p",[s._v("2018年Hortonworks目前"),a("strong",[s._v("已经被")]),s._v("Cloudera"),a("strong",[s._v("公司收购")]),s._v("。")])])])])]),s._v(" "),a("h3",{attrs:{id:"hadoop优势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop优势"}},[s._v("#")]),s._v(" Hadoop优势")]),s._v(" "),a("ol",[a("li",[s._v("高可靠性 , 数有多份副本存储在不同的机器上 , 保证数据的安全可靠")]),s._v(" "),a("li",[s._v("高容错性 , 数据有多个副本 , 当机器宕机时 , 会自动复制副本到其他机器上 , 维持副本个数 , 自动分配失败的任务")]),s._v(" "),a("li",[s._v("高扩展性 , 运算资源存储容量不足时可以横向扩展机器节点来增加")]),s._v(" "),a("li",[s._v("低成本 , hadoop可以运行在价格低廉的机器上")])]),s._v(" "),a("h3",{attrs:{id:"hadoop组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop组成"}},[s._v("#")]),s._v(" Hadoop组成")]),s._v(" "),a("p",[s._v("MapReduce（计算）")]),s._v(" "),a("p",[s._v("Yarn（资源调度）")]),s._v(" "),a("p",[s._v("HDFS（数据存储）")]),s._v(" "),a("p",[s._v("Common（辅助工具，HDFS和MR共有的常用的工具包模块！）")]),s._v(" "),a("p",[s._v("hadoop2.x增加了Yarn，Yarn只负责资源调度，MapReduce只负责运算")]),s._v(" "),a("p",[s._v("将资源调度和管理进行分离！由统一的资源调度平台YARN进行大数据计算资源的调度！")]),s._v(" "),a("p",[s._v("提升了Hadoop的通用性！Hadoop搭建的集群中的计算资源，不仅可以运行Hadoop中的MR程序！也可以运行其他计算框架的程序！\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513133442.png",alt:""}})]),s._v(" "),a("h4",{attrs:{id:"hdfs架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hdfs架构概述"}},[s._v("#")]),s._v(" HDFS架构概述")]),s._v(" "),a("p",[s._v("Hadoop Distributed File System，简称"),a("em",[s._v("HDFS")]),s._v("，是一个分布式文件系统。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513154142.png",alt:""}})]),s._v(" "),a("h4",{attrs:{id:"yarn架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn架构概述"}},[s._v("#")]),s._v(" YARN架构概述")]),s._v(" "),a("p",[s._v("Yet Another Resource Negotiator简称YARN ，另一种资源协调者，是Hadoop的资源管理器")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513154412.png",alt:""}})]),s._v(" "),a("h4",{attrs:{id:"mapreduce架构概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mapreduce架构概述"}},[s._v("#")]),s._v(" MapReduce架构概述")]),s._v(" "),a("p",[s._v("MapReduce将计算过程分为两个阶段：Map和Reduce")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("Map阶段并行处理输入数据")])]),s._v(" "),a("li",[a("p",[s._v("Reduce阶段对Map结果进行汇总")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513154635.png",alt:""}})]),s._v(" "),a("h4",{attrs:{id:"hdfs、yarn、mr关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hdfs、yarn、mr关系"}},[s._v("#")]),s._v(" HDFS、YARN、MR关系")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513154947.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"大数据技术生态体系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#大数据技术生态体系"}},[s._v("#")]),s._v(" 大数据技术生态体系")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513155159.png",alt:""}})]),s._v(" "),a("p",[s._v("图中涉及的技术名词解释如下：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("Sqoop：Sqoop是一款开源的工具，主要用于在Hadoop、Hive与传统的数据库（MySQL）间进行数据的传递，可以将一个关系型数据库（例如 ：MySQL，Oracle 等）中的数据导进到Hadoop的HDFS中，也可以将HDFS的数据导进到关系型数据库中。")])]),s._v(" "),a("li",[a("p",[s._v("Flume：Flume是一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume支持在日志系统中定制各类数据发送方，用于收集数据；")])]),s._v(" "),a("li",[a("p",[s._v("Kafka：Kafka是一种高吞吐量的分布式发布订阅消息系统；")])]),s._v(" "),a("li",[a("p",[s._v("Spark：Spark是当前最流行的开源大数据内存计算框架。可以基于Hadoop上存储的大数据进行计算。")])]),s._v(" "),a("li",[a("p",[s._v("Flink：Flink是当前最流行的开源大数据内存计算框架。用于实时计算的场景较多。")])]),s._v(" "),a("li",[a("p",[s._v("Oozie：Oozie是一个管理Hadoop作业（job）的工作流程调度管理系统。")])]),s._v(" "),a("li",[a("p",[s._v("Hbase：HBase是一个分布式的、面向列的开源数据库。HBase不同于一般的关系数据库，它是一个适合于非结构化数据存储的数据库。")])]),s._v(" "),a("li",[a("p",[s._v("Hive：Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供简单的SQL查询功能，可以将SQL语句转换为MapReduce任务进行运行。其优点是学习成本低，可以通过类SQL语句快速实现简单的MapReduce统计，不必开发专门的MapReduce应用，十分适合数据仓库的统计分析。")])]),s._v(" "),a("li",[a("p",[s._v("ZooKeeper：它是一个针对大型分布式系统的可靠协调系统，提供的功能包括：配置维护、名字服务、分布式同步、组服务等。")])])]),s._v(" "),a("h3",{attrs:{id:"推荐系统框架图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推荐系统框架图"}},[s._v("#")]),s._v(" 推荐系统框架图")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220513155636.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"hadoop运行环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop运行环境搭建"}},[s._v("#")]),s._v(" Hadoop运行环境搭建")]),s._v(" "),a("h3",{attrs:{id:"模板虚拟机环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板虚拟机环境准备"}},[s._v("#")]),s._v(" 模板虚拟机环境准备")]),s._v(" "),a("h4",{attrs:{id:"安装模板虚拟机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装模板虚拟机"}},[s._v("#")]),s._v(" 安装模板虚拟机")]),s._v(" "),a("p",[a("strong",[s._v("IP地址")]),s._v("192.168.10.100**、主机名称"),a("strong",[s._v("hadoop100")]),s._v("、内存"),a("strong",[s._v("4G")]),s._v("、**硬盘20G")]),s._v(" "),a("h4",{attrs:{id:"hadoop100虚拟机配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop100虚拟机配置"}},[s._v("#")]),s._v(" hadoop100虚拟机配置")]),s._v(" "),a("ol",[a("li",[s._v("使用yum安装需要虚拟机可以正常上网，yum安装前可以先测试下虚拟机联网情况")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ping www.baidu.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("安装epel-release")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install -y epel-release\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("注：Extra Packages for Enterprise Linux是为“红帽系”的操作系统提供额外的软件包，适用于RHEL、CentOS和Scientific Linux。相当于是一个软件仓库，大多数rpm包在官方 repository 中是找不到的）")])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("linux系统更新")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum update -y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("关闭防火墙，关闭防火墙开机自启")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl stop firewalld\nsystemctl disable firewalld\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("创建dongjb用户，并修改dongjb用户的密码")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("useradd dongjb\npasswd dongjb\ndongjb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("配置dongjb用户具有root权限，方便后期加sudo执行root权限的命令")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sudoers\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改/etc/sudoers文件，在%wheel这行下面添加一行，如下所示")]),s._v("\ndongjb   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     NOPASSWD:ALL\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：atguigu这一行不要直接放到root行下面，因为所有用户都属于wheel组，你先配置了atguigu具有免密功能，但是程序执行到%wheel行时，该功能又被覆盖回需要密码。所以atguigu要放到%wheel这行下面。")])]),s._v(" "),a("ol",{attrs:{start:"7"}},[a("li",[s._v("在/opt目录下创建文件夹，并修改所属主和所属组")])]),s._v(" "),a("ul",[a("li",[s._v("在/opt目录下创建module、software文件夹")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mkdir /opt/module\nmkdir /opt/software\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("修改module、software文件夹的所有者和所属组均为dongjb用户")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" dongjb:dongjb /opt/module\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" dongjb:dongjb /opt/software\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("查看module、software文件夹的所有者和所属组")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ll\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"8"}},[a("li",[s._v("卸载虚拟机自带的JDK")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpm -qa | grep -i java | xargs -n1 rpm -e --nodeps\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("rpm -qa：查询所安装的所有rpm软件包")])]),s._v(" "),a("li",[a("p",[s._v("grep -i：忽略大小写")])]),s._v(" "),a("li",[a("p",[s._v("xargs -n1：表示每次只传递一个参数")])]),s._v(" "),a("li",[a("p",[s._v("rpm -e –nodeps：强制卸载软件")])])]),s._v(" "),a("ol",{attrs:{start:"9"}},[a("li",[s._v("重启虚拟机")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("reboot\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"克隆虚拟机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#克隆虚拟机"}},[s._v("#")]),s._v(" 克隆虚拟机")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("利用模板机hadoop100，克隆三台虚拟机：hadoop102 hadoop103 hadoop104")])]),s._v(" "),a("li",[a("p",[s._v("修改克隆机IP")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("192.168.210.102\n192.168.210.103\n192.168.210.104\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("修改克隆机主机名")])]),s._v(" "),a("p",[s._v("修改主机名称")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim /etc/hostname\nhadoop102\nhadoop103 \nhadoop104\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("配置Linux克隆机主机名称映射hosts文件，打开/etc/hosts")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim /etc/hosts\n192.168.210.100 hadoop100\n192.168.210.101 hadoop101\n192.168.210.102 hadoop102\n192.168.210.103 hadoop103\n192.168.210.104 hadoop104\n192.168.210.105 hadoop105\n192.168.210.106 hadoop106\n192.168.210.107 hadoop107\n192.168.210.108 hadoop108\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("重启克隆机")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("reboot\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"在hadoop102安装jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在hadoop102安装jdk"}},[s._v("#")]),s._v(" 在hadoop102安装JDK")]),s._v(" "),a("ol",[a("li",[s._v("卸载现有JDK")]),s._v(" "),a("li",[s._v("用ftp传输工具将JDK导入到opt目录下面的software文件夹下面")]),s._v(" "),a("li",[s._v("在Linux系统下的opt目录中查看软件包是否导入成功")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ls /opt/software/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("解压JDK到/opt/module目录下")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -zxvf jdk-8u333-linux-x64.tar.gz -C /opt/module/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("配置JDK环境变量")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile.d/my_env.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#JAVA_HOME")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/jdk1.8.0_333\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("测试")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("java -version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"在hadoop102安装hadoop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在hadoop102安装hadoop"}},[s._v("#")]),s._v(" 在hadoop102安装Hadoop")]),s._v(" "),a("p",[s._v("Hadoop地址：https://hadoop.apache.org/")]),s._v(" "),a("ol",[a("li",[s._v("下载")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget https://dlcdn.apache.org/hadoop/common/hadoop-3.2.3/hadoop-3.2.3.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("解压安装文件到/opt/module下面")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tar -zxvf hadoop-3.2.3.tar.gz -C /opt/module/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("将Hadoop添加到环境变量")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vi /etc/profile.d/my_env.sh\n#HADOOP_HOME\nexport HADOOP_HOME=/opt/module/hadoop-3.2.3\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("测试是否安装成功")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"hadoop目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop目录结构"}},[s._v("#")]),s._v(" Hadoop目录结构")]),s._v(" "),a("ol",[a("li",[s._v("查看Hadoop目录结构")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[dongjb@hadoop102 hadoop-3.2.3]$ ll\ntotal 180\ndrwxr-xr-x. 2 mac mac    203 Mar 19 18:58 bin\ndrwxr-xr-x. 3 mac mac     20 Mar 19 18:20 etc\ndrwxr-xr-x. 2 mac mac    106 Mar 19 18:58 include\ndrwxr-xr-x. 3 mac mac     20 Mar 19 18:58 lib\ndrwxr-xr-x. 4 mac mac    288 Mar 19 18:58 libexec\n-rw-rw-r--. 1 mac mac 150571 Mar  9 21:39 LICENSE.txt\n-rw-rw-r--. 1 mac mac  21943 Mar  9 21:39 NOTICE.txt\n-rw-rw-r--. 1 mac mac   1361 Mar  9 21:39 README.txt\ndrwxr-xr-x. 3 mac mac   4096 Mar 19 18:20 sbin\ndrwxr-xr-x. 4 mac mac     31 Mar 19 19:17 share\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("重要目录")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("bin目录：存放对Hadoop相关服务（hdfs，yarn，mapred）进行操作的脚本")])]),s._v(" "),a("li",[a("p",[s._v("etc目录：Hadoop的配置文件目录，存放Hadoop的配置文件")])]),s._v(" "),a("li",[a("p",[s._v("lib目录：存放Hadoop的本地库（对数据进行压缩解压缩功能）")])]),s._v(" "),a("li",[a("p",[s._v("sbin目录：存放启动或停止Hadoop相关服务的脚本")])]),s._v(" "),a("li",[a("p",[s._v("share目录：存放Hadoop的依赖jar包、文档、和官方案例")])])]),s._v(" "),a("h2",{attrs:{id:"hadoop运行模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop运行模式"}},[s._v("#")]),s._v(" Hadoop运行模式")]),s._v(" "),a("p",[s._v("Hadoop运行模式包括："),a("strong",[s._v("本地模式")]),s._v("、"),a("strong",[s._v("伪分布式模式")]),s._v("以及"),a("strong",[s._v("完全分布式模式")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("本地模式")]),s._v("：单机运行，只是用来演示一下官方案例。生产环境不用。")]),s._v(" "),a("li",[s._v("**伪分布式模式：**也是单机运行，但是具备Hadoop集群的所有功能，一台服务器模拟一个分布式的环境。个别缺钱的公司用来测试，生产环境不用")]),s._v(" "),a("li",[s._v("**完全分布式模式：**多台服务器组成分布式环境。生产环境使用")])]),s._v(" "),a("h3",{attrs:{id:"本地运行模式-官方wordcount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地运行模式-官方wordcount"}},[s._v("#")]),s._v(" 本地运行模式（官方WordCount）")]),s._v(" "),a("ol",[a("li",[s._v("编辑word.txt文件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /opt/module/hadoop-3.2.3/wcinput\nvi word.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("执行程序")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.3.jar wordcount wcinput wcoutput\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("查看结果")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cat wcoutput/part-r-00000 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"完全分布式运行模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完全分布式运行模式"}},[s._v("#")]),s._v(" 完全分布式运行模式")]),s._v(" "),a("p",[s._v("分析：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("准备3台客户机（关闭防火墙、静态IP、主机名称）")])]),s._v(" "),a("li",[a("p",[s._v("安装JDK")])]),s._v(" "),a("li",[a("p",[s._v("配置环境变量")])]),s._v(" "),a("li",[a("p",[s._v("安装Hadoop")])]),s._v(" "),a("li",[a("p",[s._v("配置环境变量")])]),s._v(" "),a("li",[a("p",[s._v("配置集群")])]),s._v(" "),a("li",[a("p",[s._v("单点启动")])]),s._v(" "),a("li",[a("p",[s._v("配置ssh")])]),s._v(" "),a("li",[a("p",[s._v("群起并测试集群")])])]),s._v(" "),a("h4",{attrs:{id:"虚拟机准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机准备"}},[s._v("#")]),s._v(" 虚拟机准备")]),s._v(" "),a("p",[s._v("详见"),a("code",[s._v("克隆虚拟机")])]),s._v(" "),a("h4",{attrs:{id:"编写集群分发脚本xsync"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写集群分发脚本xsync"}},[s._v("#")]),s._v(" 编写集群分发脚本xsync")]),s._v(" "),a("h5",{attrs:{id:"scp-secure-copy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scp-secure-copy"}},[s._v("#")]),s._v(" scp（secure copy）")]),s._v(" "),a("ol",[a("li",[s._v("scp定义")])]),s._v(" "),a("p",[s._v("scp可以实现服务器与服务器之间的数据拷贝。（from server1 to server2）")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("基本语法")])]),s._v(" "),a("p",[s._v("scp   -r    $pdir/$fname       $user@$host:$pdir/$fname")]),s._v(" "),a("p",[s._v("命令  递归   要拷贝的文件路径/名称  目的地用户@主机:目的地路径/名称")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("案例实操")])]),s._v(" "),a("blockquote",[a("p",[s._v("前提：在hadoop102、hadoop103、hadoop104都已经创建好的/opt/module、      /opt/software两个目录，并且已经把这两个目录修改为dongjb:dongjb")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mkdir -p /opt/module\nmkdir -r  /opt/software\nsudo chown dongjb:dongjb -R /opt/module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("在hadoop102上，将hadoop102中/opt/module/jdk1.8.0_333目录拷贝到hadoop103上。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("scp -r /opt/module/jdk1.8.0_333 dongjb@hadoop103:/opt/module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("在hadoop103上，将hadoop102中/opt/module/hadoop-3.2.3目录拷贝到hadoop103上。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("scp -r dongjb@hadoop102:/opt/module/hadoop-3.2.3 /opt/module/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("在hadoop103上操作，将hadoop102中/opt/module目录下所有目录拷贝到hadoop104上。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" scp -r dongjb@hadoop102:/opt/module/* dongjb@hadoop104:/opt/module\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"rsync远程同步工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rsync远程同步工具"}},[s._v("#")]),s._v(" rsync远程同步工具")]),s._v(" "),a("p",[s._v("rsync主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。")]),s._v(" "),a("p",[s._v("rsync和scp区别：用rsync做文件的复制要比scp的速度快，rsync只对差异文件做更新。scp是把所有文件都复制过去。")]),s._v(" "),a("ol",[a("li",[s._v("基本语法")])]),s._v(" "),a("p",[s._v("rsync   -av    $pdir/$fname       $user@$host:$pdir/$fname")]),s._v(" "),a("p",[s._v("命令  选项参数  要拷贝的文件路径/名称  目的地用户@主机:目的地路径/名称")]),s._v(" "),a("p",[s._v("​     选项参数说明")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("选项")]),s._v(" "),a("th",[s._v("功能")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("-a")]),s._v(" "),a("td",[s._v("归档拷贝")])]),s._v(" "),a("tr",[a("td",[s._v("-v")]),s._v(" "),a("td",[s._v("显示复制过程")])])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("案例实操")])]),s._v(" "),a("ul",[a("li",[s._v("删除hadoop103中/opt/module/hadoop-3.2.3/wcinput")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rm -rf wcinput/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("同步hadoop102中的/opt/module/hadoop-3.2.3到hadoop103")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rsync -av hadoop-3.2.3/ dongjb@hadoop103:/opt/module/hadoop-3.2.3/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"xsync集群分发脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xsync集群分发脚本"}},[s._v("#")]),s._v(" xsync集群分发脚本")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("需求：循环复制文件到所有节点的相同目录下")])]),s._v(" "),a("li",[a("p",[s._v("需求分析：")])])]),s._v(" "),a("ul",[a("li",[s._v("rsync命令原始拷贝：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rsync -av   /opt/module     dongjb@hadoop103:/opt/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("期望脚本：")])]),s._v(" "),a("p",[s._v("xsync要同步的文件名称")]),s._v(" "),a("ul",[a("li",[s._v("期望脚本在任何路径都能使用（脚本放在声明了全局环境变量的路径）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("echo $PATH\n/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/module/jdk1.8.0_333/bin:/opt/module/hadoop-3.2.3/bin:/opt/module/hadoop-3.2.3/sbin:/home/dongjb/.local/bin:/home/dongjb/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("脚本实现")])]),s._v(" "),a("ul",[a("li",[s._v("在/home/dongjb/bin目录下创建xsync文件")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/dongjb\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" bin\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("在该文件中编写如下代码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#vim xsync")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1. 判断参数个数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -lt "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" Not Enough Arguement"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2. 遍历集群所有机器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hadoop102 hadoop103 hadoop104\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3. 遍历所有目录，挨个发送")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4. 判断文件是否存在")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5. 获取父目录")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pdir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -P "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("dirname $file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6. 获取当前文件的名称")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $file"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir -p '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v('"')]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" does not exists"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("ul",[a("li",[s._v("修改脚本 xsync 具有执行权限")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("chmod +x xsync\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("测试脚本")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xsync /home/dongjb/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("将脚本复制到/bin中，以便全局调用")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo cp xsync /bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("同步环境变量配置（root所有者）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo ./bin/xsync /etc/profile.d/my_env.sh\n#让环境变量生效hadoop103 hadoop104 \nsource /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：如果用了sudo，那么xsync一定要给它的路径补全。")])]),s._v(" "),a("h4",{attrs:{id:"ssh无密登录配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh无密登录配置"}},[s._v("#")]),s._v(" SSH无密登录配置")]),s._v(" "),a("h5",{attrs:{id:"配置ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置ssh"}},[s._v("#")]),s._v(" 配置ssh")]),s._v(" "),a("ol",[a("li",[s._v("基本语法")])]),s._v(" "),a("p",[s._v("ssh另一台电脑的IP地址")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("ssh连接时出现Host key verification failed的解决方法")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ssh hadoop103\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果出现如下内容")]),s._v(" "),a("p",[a("code",[s._v("Are you sure you want to continue connecting (yes/no)?")])]),s._v(" "),a("p",[s._v("输入yes，并回车")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("退回到hadoop102")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("exit\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"无密钥配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无密钥配置"}},[s._v("#")]),s._v(" 无密钥配置")]),s._v(" "),a("ol",[a("li",[s._v("免密登录原理")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220514163050.png",alt:""}})]),s._v(" "),a("p",[s._v("（2）生成公钥和私钥")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd ~\nls .ssh\nssh-keygen -t rsa\n#然后敲（三个回车），就会生成两个文件id_rsa（私钥）、id_rsa.pub（公钥）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("将公钥拷贝到要免密登录的目标机器上")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ssh-copy-id hadoop102\nssh-copy-id hadoop103\nssh-copy-id hadoop104\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：")]),s._v(" "),a("p",[s._v("还需要在hadoop103上采用atguigu账号配置一下无密登录到hadoop102、hadoop103、hadoop104服务器上。")]),s._v(" "),a("p",[s._v("还需要在hadoop104上采用atguigu账号配置一下无密登录到hadoop102、hadoop103、hadoop104服务器上。")]),s._v(" "),a("p",[s._v("还需要在hadoop102上采用root账号，配置一下无密登录到hadoop102、hadoop103、hadoop104；")])]),s._v(" "),a("h5",{attrs:{id:"ssh目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh目录结构"}},[s._v("#")]),s._v(" .ssh目录结构")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("known_hosts")]),s._v(" "),a("th",[s._v("记录ssh访问过计算机的公钥（public  key）")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("id_rsa")]),s._v(" "),a("td",[s._v("生成的私钥")])]),s._v(" "),a("tr",[a("td",[s._v("id_rsa.pub")]),s._v(" "),a("td",[s._v("生成的公钥")])]),s._v(" "),a("tr",[a("td",[s._v("authorized_keys")]),s._v(" "),a("td",[s._v("存放授权过的无密登录服务器公钥")])])])]),s._v(" "),a("h4",{attrs:{id:"集群配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群配置"}},[s._v("#")]),s._v(" 集群配置")]),s._v(" "),a("h5",{attrs:{id:"集群部署规划"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群部署规划"}},[s._v("#")]),s._v(" 集群部署规划")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：")]),s._v(" "),a("p",[s._v("NameNode和SecondaryNameNode不要安装在同一台服务器")]),s._v(" "),a("p",[s._v("ResourceManager也很消耗内存，不要和NameNode、SecondaryNameNode配置在同一台机器上。")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th"),s._v(" "),a("th",[s._v("hadoop102")]),s._v(" "),a("th",[s._v("hadoop103")]),s._v(" "),a("th",[s._v("hadoop104")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("HDFS")]),s._v(" "),a("td",[a("code",[s._v("NameNode")]),a("br"),s._v("  DataNode")]),s._v(" "),a("td",[s._v("DataNode")]),s._v(" "),a("td",[a("code",[s._v("SecondaryNameNode")]),a("br"),s._v("DataNode")])]),s._v(" "),a("tr",[a("td",[s._v("YARN")]),s._v(" "),a("td",[s._v("NodeManager")]),s._v(" "),a("td",[a("code",[s._v("ResourceManager")]),s._v(" "),a("br"),s._v(" NodeManager")]),s._v(" "),a("td",[s._v("NodeManager")])])])]),s._v(" "),a("h5",{attrs:{id:"配置文件说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件说明"}},[s._v("#")]),s._v(" 配置文件说明")]),s._v(" "),a("p",[s._v("Hadoop配置文件分两类：默认配置文件和自定义配置文件，只有用户想修改某一默认配置值时，才需要修改自定义配置文件，更改相应属性值")]),s._v(" "),a("ol",[a("li",[s._v("默认配置文件")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("要获取的默认文件")]),s._v(" "),a("th",[s._v("文件存放在Hadoop的jar包中的位置")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("[core-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-common-3.1.3.jar/core-default.xml")])]),s._v(" "),a("tr",[a("td",[s._v("[hdfs-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-hdfs-3.1.3.jar/hdfs-default.xml")])]),s._v(" "),a("tr",[a("td",[s._v("[yarn-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-yarn-common-3.1.3.jar/yarn-default.xml")])]),s._v(" "),a("tr",[a("td",[s._v("[mapred-default.xml]")]),s._v(" "),a("td",[s._v("hadoop-mapreduce-client-core-3.1.3.jar/mapred-default.xml")])])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("自定义配置文件")])]),s._v(" "),a("p",[a("strong",[s._v("core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml")]),s._v("四个配置文件存放在$HADOOP_HOME/etc/hadoop这个路径上，用户可以根据项目需求重新进行修改配置")]),s._v(" "),a("h5",{attrs:{id:"配置集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置集群"}},[s._v("#")]),s._v(" 配置集群")]),s._v(" "),a("ol",[a("li",[s._v("核心配置文件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd $HADOOP_HOME/etc/hadoop\nvim core-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("文件内容如下")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定NameNode的地址 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("fs.defaultFS"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hdfs://hadoop102:8020"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定hadoop数据的存储目录 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.tmp.dir"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/opt/module/hadoop-3.2.3/data"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 配置HDFS网页登录使用的静态用户为dongjb --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop.http.staticuser.user"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("dongjb"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("HDFS配置文件")])]),s._v(" "),a("p",[a("code",[s._v("vim hdfs-site.xml")])]),s._v(" "),a("p",[s._v("文件内容如下")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- nn web端访问地址--\x3e")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("dfs.namenode.http-address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:9870"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 2nn web端访问地址--\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("dfs.namenode.secondary.http-address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop104:9868"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("YARN配置文件")])]),s._v(" "),a("p",[a("code",[s._v("vim yarn-site.xml")])]),s._v(" "),a("p",[s._v("文件内容如下")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定MR走shuffle --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.nodemanager.aux-services"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce_shuffle"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定ResourceManager的地址--\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.resourcemanager.hostname"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop103"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 环境变量的继承 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.nodemanager.env-whitelist"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("MapReduce配置文件")])]),s._v(" "),a("p",[a("code",[s._v("vim mapred-site.xml")])]),s._v(" "),a("p",[s._v("文件内容如下")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定MapReduce程序运行在Yarn上 --\x3e")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.framework.name"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h5",{attrs:{id:"分发配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分发配置"}},[s._v("#")]),s._v(" 分发配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xsync /opt/module/hadoop-3.2.3/etc/hadoop/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"查看分发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看分发"}},[s._v("#")]),s._v(" 查看分发")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cat /opt/module/hadoop-3.2.3/etc/hadoop/core-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"群起集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#群起集群"}},[s._v("#")]),s._v(" 群起集群")]),s._v(" "),a("h5",{attrs:{id:"配置workers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置workers"}},[s._v("#")]),s._v(" 配置workers")]),s._v(" "),a("p",[a("code",[s._v("vim /opt/module/hadoop-3.2.3/etc/hadoop/workers")])]),s._v(" "),a("p",[s._v("在该文件中增加如下内容")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop102\nhadoop103\nhadoop104\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：该文件中添加的内容结尾不允许有空格，文件中不允许有空行")])]),s._v(" "),a("p",[s._v("同步所有节点配置文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xsync /opt/module/hadoop-3.2.3/etc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"启动集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动集群"}},[s._v("#")]),s._v(" 启动集群")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("如果集群是第一次启动")]),s._v("，需要在hadoop102节点格式化NameNode")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hdfs namenode -format\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：格式化NameNode，会产生新的集群id，导致NameNode和DataNode的集群id不一致，集群找不到已往数据。如果集群在运行过程中报错，需要重新格式化NameNode的话，一定要先停止namenode和datanode进程，并且要删除所有机器的data和logs目录，然后再进行格式化")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("启动HDFS")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sbin/start-dfs.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("启动YARN,在配置了ResourceManager的节点（hadoop103）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sbin/start-yarn.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("Web端查看HDFS的NameNode")])]),s._v(" "),a("ul",[a("li",[s._v("浏览器中输入：http://hadoop102:9870")]),s._v(" "),a("li",[s._v("查看HDFS上存储的数据信息")])]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("Web端查看YARN的ResourceManager")])]),s._v(" "),a("ul",[a("li",[s._v("浏览器中输入：http://hadoop103:8088")]),s._v(" "),a("li",[s._v("查看YARN上运行的Job信息")])]),s._v(" "),a("h5",{attrs:{id:"集群基本测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群基本测试"}},[s._v("#")]),s._v(" 集群基本测试")]),s._v(" "),a("ol",[a("li",[s._v("上传文件到集群")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop fs -mkdir /input\nhadoop fs -put $HADOOP_HOME/wcinput/word.txt /input\nhadoop fs -put /opt/software/jdk-8u333-linux-x64.tar.gz  /\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("上传文件后查看文件存放在什么位置")])]),s._v(" "),a("p",[s._v("查看HDFS文件存储路径")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pwd\n/opt/module/hadoop-3.2.3/data/dfs/data/current/BP-75866182-192.168.210.102-1652533233053/current/finalized/subdir0/subdir0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("查看HDFS在磁盘存储文件内容")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cat blk_1073741825\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("拼接")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-rw-rw-r--. 1 dongjb dongjb 134217728 May 14 06:34 blk_1073741826\n-rw-rw-r--. 1 dongjb dongjb   1048583 May 14 06:34 blk_1073741826_1002.meta\n-rw-rw-r--. 1 dongjb dongjb  13785693 May 14 06:34 blk_1073741827\n-rw-rw-r--. 1 dongjb dongjb    107711 May 14 06:34 blk_1073741827_1003.meta\n\ncat blk_1073741826 >> tmp.tar.gz\ncat blk_1073741827 >> tmp.tar.gz\ntar -zxvf tmp.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("下载")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop fs -get /jdk-8u333-linux-x64.tar.gz ./\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("执行wordcount程序")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.3.jar wordcount /input /output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"配置历史服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置历史服务器"}},[s._v("#")]),s._v(" 配置历史服务器")]),s._v(" "),a("p",[s._v("为了查看程序的历史运行情况，需要配置一下历史服务器。具体配置步骤如下")]),s._v(" "),a("ol",[a("li",[s._v("配置mapred-site.xml")])]),s._v(" "),a("p",[s._v("在该文件里面增加如下配置")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 历史服务器端地址 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.jobhistory.address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:10020"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 历史服务器web端地址 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.jobhistory.webapp.address"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:19888"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("分发配置")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xsync $HADOOP_HOME/etc/hadoop/mapred-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("在hadoop102启动历史服务器")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mapred --daemon start historyserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("查看历史服务器是否启动")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("jps\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("查看JobHistory")])]),s._v(" "),a("p",[s._v("http://hadoop102:19888/jobhistory")]),s._v(" "),a("h4",{attrs:{id:"配置日志的聚集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置日志的聚集"}},[s._v("#")]),s._v(" 配置日志的聚集")]),s._v(" "),a("p",[s._v("日志聚集概念：应用运行完成以后，将程序运行日志信息上传到HDFS系统上")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220514224044.png",alt:""}})]),s._v(" "),a("p",[s._v("日志聚集功能好处：可以方便的查看到程序运行详情，方便开发调试")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：开启日志聚集功能，需要重新启动NodeManager 、ResourceManager和HistoryServer")])]),s._v(" "),a("p",[s._v("开启日志聚集功能具体步骤如下")]),s._v(" "),a("ol",[a("li",[s._v("配置yarn-site.xml")])]),s._v(" "),a("p",[a("code",[s._v("vim yarn-site.xml")])]),s._v(" "),a("p",[s._v("在该文件里面增加如下配置")]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 开启日志聚集功能 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log-aggregation-enable"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 设置日志聚集服务器地址 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log.server.url"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("http://hadoop102:19888/jobhistory/logs"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 设置日志保留时间为7天 --\x3e")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log-aggregation.retain-seconds"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("604800"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("分发配置")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xsync $HADOOP_HOME/etc/hadoop/yarn-site.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("关闭NodeManager 、ResourceManager和HistoryServer")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("sbin/stop-yarn.sh\nmapred --daemon stop historyserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("启动NodeManager 、ResourceManage和HistoryServer")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("start-yarn.sh\nmapred --daemon start historyserver\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("删除HDFS上已经存在的输出文件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop fs -rm -r /output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"7"}},[a("li",[s._v("执行WordCount程序")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.3.jar wordcount /input /output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"8"}},[a("li",[s._v("查看日志")])]),s._v(" "),a("p",[s._v("历史服务器地址 http://hadoop102:19888/jobhistory")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220515092430.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220515092503.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220515092524.png",alt:""}})]),s._v(" "),a("h4",{attrs:{id:"集群启动-停止方式总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群启动-停止方式总结"}},[s._v("#")]),s._v(" 集群启动/停止方式总结")]),s._v(" "),a("h5",{attrs:{id:"各个模块分开启动-停止-配置ssh是前提-常用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#各个模块分开启动-停止-配置ssh是前提-常用"}},[s._v("#")]),s._v(" 各个模块分开启动/停止（配置ssh是前提）常用")]),s._v(" "),a("ol",[a("li",[s._v("整体启动/停止HDFS")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("start-dfs.sh/stop-dfs.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("整体启动/停止YARN")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("start-yarn.sh/stop-yarn.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"各个服务组件逐一启动-停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#各个服务组件逐一启动-停止"}},[s._v("#")]),s._v(" 各个服务组件逐一启动/停止")]),s._v(" "),a("ol",[a("li",[s._v("分别启动/停止HDFS组件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hdfs --daemon start/stop namenode/datanode/secondarynamenode\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("分别启动/停止YARN")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yarn --daemon start/stop  resourcemanager/nodemanager\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"编写hadoop集群常用脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写hadoop集群常用脚本"}},[s._v("#")]),s._v(" 编写Hadoop集群常用脚本")]),s._v(" "),a("h5",{attrs:{id:"hadoop集群启停脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop集群启停脚本"}},[s._v("#")]),s._v(" Hadoop集群启停脚本")]),s._v(" "),a("p",[s._v("（包含HDFS，Yarn，Historyserver）：myhadoop.sh")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" cd /home/dongjb/bin\n vim myhadoop.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("输入如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -lt "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"No Args Input..."')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" =================== 启动 hadoop集群 ==================="')]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 hdfs ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.2.3/sbin/start-dfs.sh"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 yarn ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop103 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.2.3/sbin/start-yarn.sh"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 historyserver ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.2.3/bin/mapred --daemon start historyserver"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" =================== 关闭 hadoop集群 ==================="')]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 historyserver ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.2.3/bin/mapred --daemon stop historyserver"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 yarn ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop103 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.2.3/sbin/stop-yarn.sh"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 hdfs ---------------"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.2.3/sbin/stop-dfs.sh"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Input Args Error..."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("p",[s._v("赋予脚本执行权")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("chmod +x myhadoop.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"查看进程脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看进程脚本"}},[s._v("#")]),s._v(" 查看进程脚本")]),s._v(" "),a("p",[s._v("查看三台服务器Java进程脚本：jpsall")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /home/dongjb/bin\nvim jpsall\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("输入如下内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hadoop102 hadoop103 hadoop104\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" jps \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("赋予脚本执行权")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("chmod +x jpsall\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"脚本分发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚本分发"}},[s._v("#")]),s._v(" 脚本分发")]),s._v(" "),a("p",[s._v("分发/home/dongjb/bin目录，保证自定义脚本在三台机器上都可以使用")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xsync /home/dongjb/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"常用端口号说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用端口号说明"}},[s._v("#")]),s._v(" 常用端口号说明")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("端口名称")]),s._v(" "),a("th",[s._v("Hadoop2.x")]),s._v(" "),a("th",[s._v("Hadoop3.x")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("NameNode内部通信端口")]),s._v(" "),a("td",[s._v("8020 / 9000")]),s._v(" "),a("td",[s._v("8020 / 9000/9820")])]),s._v(" "),a("tr",[a("td",[s._v("NameNode HTTP UI")]),s._v(" "),a("td",[s._v("50070")]),s._v(" "),a("td",[s._v("9870")])]),s._v(" "),a("tr",[a("td",[s._v("MapReduce查看执行任务端口")]),s._v(" "),a("td",[s._v("8088")]),s._v(" "),a("td",[s._v("8088")])]),s._v(" "),a("tr",[a("td",[s._v("历史服务器通信端口")]),s._v(" "),a("td",[s._v("19888")]),s._v(" "),a("td",[s._v("19888")])])])]),s._v(" "),a("h4",{attrs:{id:"集群时间同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群时间同步"}},[s._v("#")]),s._v(" 集群时间同步")]),s._v(" "),a("p",[s._v("如果服务器在公网环境（能连接外网），可以不采用集群时间同步，因为服务器会定期和公网时间进行校准；")]),s._v(" "),a("p",[s._v("如果服务器在内网环境，必须要配置集群时间同步，否则时间久了，会产生时间偏差，导致集群执行任务时间不同步")]),s._v(" "),a("h5",{attrs:{id:"需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求"}},[s._v("#")]),s._v(" 需求")]),s._v(" "),a("p",[s._v("找一个机器，作为时间服务器，所有的机器与这台集群时间进行定时的同步，生产环境根据任务对时间的准确程度要求周期同步。测试环境为了尽快看到效果，采用1分钟同步一次。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220515101114.png",alt:""}})]),s._v(" "),a("h5",{attrs:{id:"时间服务器配置-必须root用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#时间服务器配置-必须root用户"}},[s._v("#")]),s._v(" 时间服务器配置（必须root用户）")]),s._v(" "),a("ol",[a("li",[s._v("查看所有节点ntpd服务状态和开机自启动状态")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl status ntpd\nsudo systemctl start ntpd\nsudo systemctl is-enabled ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("修改hadoop102的ntp.conf配置文件")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" sudo vim /etc/ntp.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改内容如下")]),s._v(" "),a("ul",[a("li",[s._v("授权192.168.10.0-192.168.10.255网段上的所有机器可以从这台机器上查询和同步时间")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap")]),s._v("\n为restrict "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".210.0 mask "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0 nomodify notrap\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("集群在局域网中，不使用其他互联网上的时间")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".centos.pool.ntp.org iburst\nserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".centos.pool.ntp.org iburst\nserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".centos.pool.ntp.org iburst\nserver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".centos.pool.ntp.org iburst\n为\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 0.centos.pool.ntp.org iburst")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 1.centos.pool.ntp.org iburst")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 2.centos.pool.ntp.org iburst")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 3.centos.pool.ntp.org iburst")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("当该节点丢失网络连接，依然可以采用本地时间作为时间服务器为集群中的其他节点提供时间同步")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.127")]),s._v(".1.0\nfudge "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.127")]),s._v(".1.0 stratum "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("修改hadoop102的/etc/sysconfig/ntpd 文件")])]),s._v(" "),a("p",[a("code",[s._v("sudo vim /etc/sysconfig/ntpd")])]),s._v(" "),a("p",[s._v("增加内容如下（让硬件时间与系统时间一起同步）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SYNC_HWCLOCK=yes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("重新启动ntpd服务")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl start ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("设置ntpd服务开机启动")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl enable ntpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"其他机器配置-必须root用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他机器配置-必须root用户"}},[s._v("#")]),s._v(" 其他机器配置（必须root用户）")]),s._v(" "),a("ol",[a("li",[s._v("关闭所有节点上ntp服务和自启动")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl stop ntpd\nsudo systemctl disable ntpd\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("在其他机器配置1分钟与时间服务器同步一次")])]),s._v(" "),a("p",[a("code",[s._v("sudo crontab -e")])]),s._v(" "),a("p",[s._v("编写定时任务如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("*/1 * * * * /usr/sbin/ntpdate hadoop102\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("修改任意机器时间")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(' sudo date -s "2021-9-11 11:11:11"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("1分钟后查看机器是否与时间服务器同步")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" sudo date\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"常见错误及解决办法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见错误及解决办法"}},[s._v("#")]),s._v(" 常见错误及解决办法")]),s._v(" "),a("ol",[a("li",[s._v("防火墙没关闭、或者没有启动YARN")])]),s._v(" "),a("p",[a("em",[s._v("INFO client.RMProxy: Connecting to ResourceManager at hadoop108/192.168.210.102:8032")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("主机名称配置错误")])]),s._v(" "),a("li",[a("p",[s._v("IP地址配置错误")])]),s._v(" "),a("li",[a("p",[s._v("ssh没有配置好")])]),s._v(" "),a("li",[a("p",[s._v("root用户和dongjb两个用户启动集群不统一")])]),s._v(" "),a("li",[a("p",[s._v("配置文件修改不细心")])]),s._v(" "),a("li",[a("p",[s._v("不识别主机名称")])])]),s._v(" "),a("p",[s._v("java.net.UnknownHostException: hadoop102: hadoop102")]),s._v(" "),a("p",[s._v("​    at java.net.InetAddress.getLocalHost(InetAddress.java:1475)")]),s._v(" "),a("p",[s._v("​    at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:146)")]),s._v(" "),a("p",[s._v("​    at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1290)")]),s._v(" "),a("p",[s._v("​    at org.apache.hadoop.mapreduce.Job$10.run(Job.java:1287)")]),s._v(" "),a("p",[s._v("​    at java.security.AccessController.doPrivileged(Native Method)")]),s._v(" "),a("p",[s._v("at javax.security.auth.Subject.doAs(Subject.java:415)")]),s._v(" "),a("p",[s._v("解决办法：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("在/etc/hosts文件中添加192.168.210.102 hadoop102")])]),s._v(" "),a("li",[a("p",[s._v("主机名称不要起hadoop hadoop000等特殊名称")])])]),s._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[s._v("DataNode和NameNode进程同时只能工作一个。")])]),s._v(" "),a("p",[s._v("​                                "),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220515102934.png",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"9"}},[a("li",[s._v("执行命令不生效，粘贴Word中命令时，遇到-和长–没区分开。导致命令失效")])]),s._v(" "),a("p",[s._v("解决办法：尽量不要粘贴Word中代码。")]),s._v(" "),a("ol",{attrs:{start:"10"}},[a("li",[s._v("jps发现进程已经没有，但是重新启动集群，提示进程已经开启。")])]),s._v(" "),a("p",[s._v("原因是在Linux的根目录下/tmp目录中存在启动的进程临时文件，将集群相关进程删除掉，再重新启动集群。")]),s._v(" "),a("ol",{attrs:{start:"11"}},[a("li",[s._v("jps不生效")])]),s._v(" "),a("p",[s._v("原因：全局变量hadoop java没有生效。解决办法：需要source /etc/profile文件。")]),s._v(" "),a("ol",{attrs:{start:"12"}},[a("li",[s._v("8088端口连接不上")])]),s._v(" "),a("p",[s._v("[dongjb@hadoop102 桌面]$ cat /etc/hosts")]),s._v(" "),a("p",[s._v("注释掉如下代码")]),s._v(" "),a("p",[s._v("#127.0.0.1  localhost localhost.localdomain localhost4 localhost4.localdomain4")]),s._v(" "),a("p",[s._v("#::1     hadoop102")])])}),[],!1,null,null,null);a.default=e.exports}}]);