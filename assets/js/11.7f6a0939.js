(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{327:function(a,e,t){"use strict";t.r(e);var s=t(3),l=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h3",{attrs:{id:"连接操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接操作"}},[a._v("#")]),a._v(" 连接操作")]),a._v(" "),e("p",[a._v("fs_cli是FreeSWITCH的一个客户端连接程序，可以方便地查看运行情况，并对其进行控制。若在本机使用默认配置，可直接启动fs_cli；否则需要携带参数（以连接运行在192.168.210.10上的FreeSWITCH为例）(失败不能连接)")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("启动一个命令行窗口，通过help可以查看操作命令")]),a._v(" "),e("p",[e("code",[a._v("fs_cli -H 192.168.210.10 -P 8021 -p ClueCon")])])]),a._v(" "),e("li",[e("p",[a._v("fs_cli也可执行一条指定的命令（如获取版本信息）")]),a._v(" "),e("p",[e("code",[a._v('fs_cli -H 192.168.210.10 -P 8021 -p ClueCon -x "version"')])])])]),a._v(" "),e("blockquote",[e("p",[a._v("注意：listen-ip 修改成 0.0.0.0，重启FreeSWITCH，指定ip就可以连接成功了")]),a._v(" "),e("p",[a._v("cd /usr/local/freeswitch/conf/autoload_configs")]),a._v(" "),e("p",[a._v("vi event_socket.conf.xml")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/dong-jianbin/drawing-bed/mall/20220131080620.png",alt:""}})])]),a._v(" "),e("h3",{attrs:{id:"退出操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#退出操作"}},[a._v("#")]),a._v(" 退出操作")]),a._v(" "),e("p",[a._v("退出fs_cli（保持FreeSWITCH运行）")]),a._v(" "),e("ul",[e("li",[a._v("/quit")]),a._v(" "),e("li",[a._v("/bye")]),a._v(" "),e("li",[a._v("/exit")]),a._v(" "),e("li",[a._v("...：三个点，若在‘Console窗口‘中为退出FreeSWITCH")]),a._v(" "),e("li",[a._v("Linux可通过ctrl+D快捷键")]),a._v(" "),e("li",[a._v("shutdown 退出FreeSWITCH：")])]),a._v(" "),e("h3",{attrs:{id:"日志与显示操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日志与显示操作"}},[a._v("#")]),a._v(" 日志与显示操作")]),a._v(" "),e("p",[a._v("设定显示日志级别")]),a._v(" "),e("ul",[e("li",[a._v("通过console loglevel设定显示级别（fs_cli和‘Console窗口‘中都可以）\n"),e("ul",[e("li",[a._v("debug,info,notice,warning,err,crit,alert：7个级别")]),a._v(" "),e("li",[a._v("1~7： 对应上面7个级别（7为debug，1为alert）")]),a._v(" "),e("li",[a._v("0：关闭所有输出（console loglevel 0）")])])]),a._v(" "),e("li",[a._v("fsctl loglevel "),e("level",[a._v("：设定指定日志级别")])],1),a._v(" "),e("li",[a._v("/log：默认为debug或指定的级别（与loglevel相同）")]),a._v(" "),e("li",[a._v("/nolog：关闭日志")]),a._v(" "),e("li",[a._v("sofia profile internal siptrace on/off：开启或关闭SIP消息跟踪功能")])]),a._v(" "),e("h3",{attrs:{id:"全局变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局变量"}},[a._v("#")]),a._v(" 全局变量")]),a._v(" "),e("ul",[e("li",[a._v("全局变量\n"),e("ul",[e("li",[a._v("global_getvar ["),e("varname",[a._v("]：获取全局变量")])],1),a._v(" "),e("li",[a._v("global_setvar "),e("varname",[a._v("="),e("value",[a._v("：设定全局变量")])],1)],1)])]),a._v(" "),e("li",[a._v("查看：eval ${val-name}")])]),a._v(" "),e("p",[e("em",[a._v("global_getvar domain")])]),a._v(" "),e("p",[e("em",[a._v("eval ${domain}")])]),a._v(" "),e("p",[a._v("global_setvar sound_prefix = /usr/local/freeswitch/sounds/zh/cn/anon")]),a._v(" "),e("p",[a._v("global_getvar sound_prefix")]),a._v(" "),e("action",{attrs:{application:"set",data:"sound_prefix=$${sounds_dir}/zh/cn/anon/ivr/8000"}}),a._v(" "),e("h3",{attrs:{id:"fsctl-发送控制信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fsctl-发送控制信息"}},[a._v("#")]),a._v(" fsctl：发送控制信息")]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("fsctl "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("send_sighup "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\t\thupall "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    pause "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("inbound"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("outbound"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    resume "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("inbound"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("outbound"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("shutdown")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("cancel"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("elegant"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("asap"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("restart"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    last_sps "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    sps "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("num"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    sync_clock "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    sync_clock_when_idle "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    reclaim_mem "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    max_sessions "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    min_dtmf_duration "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("num"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    max_dtmf_duration "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("num"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    default_dtmf_duration "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("num"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    loglevel "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("level"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n\n    verbose_events "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("on"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("off"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br"),e("span",{staticClass:"line-number"},[a._v("30")]),e("br"),e("span",{staticClass:"line-number"},[a._v("31")]),e("br"),e("span",{staticClass:"line-number"},[a._v("32")]),e("br")])]),e("ul",[e("li",[a._v("fsctl debug_level [level]：设定日志记录级别（影响日志记录、console输出等）\n"),e("ul",[e("li",[a._v("0 - fatal errors, panic")]),a._v(" "),e("li",[a._v("1 - critical errors, minimal progress at subsystem level")]),a._v(" "),e("li",[a._v("2 - non-critical errors")]),a._v(" "),e("li",[a._v("3 - warnings, progress messages")]),a._v(" "),e("li",[a._v("5 - signaling protocol actions (incoming packets, ...)")]),a._v(" "),e("li",[a._v("7 - media protocol actions (incoming packets, ...)")]),a._v(" "),e("li",[a._v("9 - entering/exiting functions, very verbatim progress")])])]),a._v(" "),e("li",[a._v("fsctl hupall <clearing_type> dialed_ext "),e("extension",[a._v("：关闭所有指定呼叫，如：fsctl hupall normal_clearing dialed_ext 1000")])],1),a._v(" "),e("li",[a._v("fsctl "),e("strong",[a._v("shutdown")]),a._v(" [asap|asap restart|cancel|elegant|now|restart|restart asap|restart elegant]\n"),e("ul",[e("li",[a._v("cancel - discontinue a previous shutdown request.")]),a._v(" "),e("li",[a._v("elegant - wait for all traffic to stop, while allowing new traffic")]),a._v(" "),e("li",[a._v("asap - wait for all traffic to stop, but deny new traffic")]),a._v(" "),e("li",[a._v("now - shutdown FreeSWITCH immediately")]),a._v(" "),e("li",[a._v("restart - restart FreeSWITCH immediately following the shutdown")])])])]),a._v(" "),e("h3",{attrs:{id:"通话相关命令简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通话相关命令简介"}},[a._v("#")]),a._v(" 通话相关命令简介")]),a._v(" "),e("ul",[e("li",[a._v("查看注册用户\n"),e("ul",[e("li",[a._v("sofia status/xmlstatus profile internal reg [1006]")]),a._v(" "),e("li",[a._v("show registrations")])])]),a._v(" "),e("li",[a._v("删除注册用户：sofia profile internal flush_inbound_reg <用户id>")]),a._v(" "),e("li",[a._v("查看通话通道：show channels [like 1006@] as xml")]),a._v(" "),e("li",[a._v("呼叫（1.6版本下，要带absolute_codec_string='PCMA'，否则可能是视频呼叫，然后编码失败）\n"),e("ul",[e("li",[a._v("originate user/1011 &bridge(user/1013)")]),a._v(" "),e("li",[a._v("originate user/1006 &bridge(sofia/external/5001@192.168.6.90)")]),a._v(" "),e("li",[a._v("originate user/1011 &playback(rec1011.wav)")]),a._v(" "),e("li",[a._v("originate user/1012 &conference(3001)")]),a._v(" "),e("li",[a._v("originate user/1011 &echo")])])]),a._v(" "),e("li",[a._v("关闭所有指定呼叫：hupall "),e("cause",[a._v(" ["),e("variable",[e("value",[a._v("]\n"),e("ul",[e("li",[a._v("hupall normal_clearing foo bar：关闭所有通道变量foo=bar的channel")])])])],1)],1)],1),a._v(" "),e("li",[a._v("加入会议\n"),e("ul",[e("li",[a._v("conference 3001 dial {absolute_codec_string='PCMA@20i'}user/1013")]),a._v(" "),e("li",[a._v("conference 3001 dial sofia/external/5001@192.168.6.90")]),a._v(" "),e("li",[a._v("列出所有会议：conference list")])])]),a._v(" "),e("li",[a._v("呼叫中心\n"),e("ul",[e("li",[a._v("查看Agent：callcenter_config agent list")]),a._v(" "),e("li",[a._v("查看队列：callcenter_config queue list")])])]),a._v(" "),e("li",[a._v("顺振：originate user/1006 &bridge(user/1011|user/1012)")]),a._v(" "),e("li",[a._v("同振：originate user/1006 &bridge(user/1011,user/1012)")]),a._v(" "),e("li",[a._v("添加通道变量：originate {origination_caller_id_number=8888,ignore_early_media=true,xugd-wavfile=notice.wav,absolute_codec_string=PCMA}user/1018 &lua(voiceNotify.lua)")]),a._v(" "),e("li",[a._v("重新加载配置\n"),e("ul",[e("li",[a._v("reloadxml：重新一般配置修改（拨号计划、用户等）")]),a._v(" "),e("li",[a._v("网关（重启）：sofia profile external restart")]),a._v(" "),e("li",[a._v("只重新加载修改的网关（gwt）：\n"),e("ul",[e("li",[a._v("sofia profile external killgw gwt")]),a._v(" "),e("li",[a._v("sofia profile external rescan")])])]),a._v(" "),e("li",[a._v("reload <mod_name>：重新加载模块")]),a._v(" "),e("li",[a._v("reloadacl：重新加载ACL")])])]),a._v(" "),e("li",[e("a",{attrs:{href:"https://so.csdn.net/so/search?q=uuid&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[a._v("uuid"),e("OutboundLink")],1),a._v("一族（以uuid开始的）\n"),e("ul",[e("li",[a._v("uuid_answer "),e("uuid",[a._v("：接听")])],1),a._v(" "),e("li",[a._v("uuid_kill "),e("uuid",[a._v(" [cause]：挂机")])],1),a._v(" "),e("li",[a._v("uuid_bridge "),e("uuid",[a._v(" <other_uuid>：桥接通道")])],1),a._v(" "),e("li",[a._v("uuid_transfer "),e("uuid",[a._v(" [-bleg|-both] "),e("dest-exten",[a._v(" ["),e("dialplan",[a._v("] ["),e("context",[a._v("]：转移电话")])],1)],1)],1)],1),a._v(" "),e("li",[a._v("uuid_break "),e("uuid",[a._v(" [all]：停止媒体发送")])],1),a._v(" "),e("li",[a._v("uuid_broadcast "),e("uuid",[e("path",[a._v(" [aleg|bleg|both]：播放媒体")])])],1),a._v(" "),e("li",[a._v("uuid_deflect "),e("uuid",[e("sip",{attrs:{URL:""}},[a._v("：转移通话")])],1)],1),a._v(" "),e("li",[a._v("uuid_displace "),e("uuid",[a._v(" [start|stop] "),e("file",[a._v(" ["),e("limit",[a._v("] [mux]：替换媒体（Displace the audio for the target with the specified audio）")])],1)],1)],1),a._v(" "),e("li",[a._v("uuid_record "),e("uuid",[a._v(" [start|stop|mask|unmask] "),e("path",[a._v(" ["),e("limit",[a._v("]：录音，Where limit is the max number of seconds to record")])],1)])],1),a._v(" "),e("li",[a._v("uuid_getvar "),e("uuid",[e("varname",[a._v("：获取通道上变量")])],1)],1),a._v(" "),e("li",[a._v("uuid_setvar "),e("uuid",[e("varname",[a._v(" [value]：设定通道变量")])],1)],1)])])]),a._v(" "),e("h3",{attrs:{id:"show-显示信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#show-显示信息"}},[a._v("#")]),a._v(" show：显示信息")]),a._v(" "),e("p",[a._v("show [")]),a._v(" "),e("p",[a._v("aliases |")]),a._v(" "),e("p",[a._v("api |")]),a._v(" "),e("p",[a._v("application |")]),a._v(" "),e("p",[a._v("bridged_calls |")]),a._v(" "),e("p",[a._v("calls [count] |")]),a._v(" "),e("p",[a._v("channels [count|like "),e("match",{attrs:{string:""}},[a._v("] |")])],1),a._v(" "),e("p",[a._v("chat |")]),a._v(" "),e("p",[a._v("codec |")]),a._v(" "),e("p",[a._v("complete |")]),a._v(" "),e("p",[a._v("detailed_bridged_calls |")]),a._v(" "),e("p",[a._v("detailed_calls |")]),a._v(" "),e("p",[a._v("dialplan |")]),a._v(" "),e("p",[a._v("endpoint |")]),a._v(" "),e("p",[a._v("file |")]),a._v(" "),e("p",[a._v("interface_types |")]),a._v(" "),e("p",[a._v("interfaces |")]),a._v(" "),e("p",[a._v("limits")]),a._v(" "),e("p",[a._v("management |")]),a._v(" "),e("p",[a._v("modules |")]),a._v(" "),e("p",[a._v("nat_map |")]),a._v(" "),e("p",[a._v("registrations |")]),a._v(" "),e("p",[a._v("say |")]),a._v(" "),e("p",[a._v("tasks |")]),a._v(" "),e("p",[a._v("timer |")]),a._v(" "),e("p",[a._v("] [as xml|as delim "),e("delimiter",[a._v("]")])],1),a._v(" "),e("ul",[e("li",[a._v("aliases – list defined command aliases")]),a._v(" "),e("li",[a._v("api – list api commands exposed by loadable modules")]),a._v(" "),e("li",[a._v("application – list applications exposed by loadable modules, notably mod_dptools")]),a._v(" "),e("li",[a._v('calls [count] – list details of currently active calls; the keyword "count" eliminates the details and only prints the total count of calls')]),a._v(" "),e("li",[a._v("channels [count|like "),e("match",{attrs:{string:""}},[a._v("] – list current channels; see Channels vs Calls\n"),e("ul",[e("li",[a._v("count – show only the count of active channels, no details")]),a._v(" "),e("li",[a._v("like "),e("match",{attrs:{string:""}},[a._v(" – filter results to include only channels that contain "),e("match",{attrs:{string:""}},[a._v(" in uuid, channel name, cid_number, cid_name, presence data fields.")])],1)],1)])])],1),a._v(" "),e("li",[a._v("chat – list chat interfaces")]),a._v(" "),e("li",[a._v("codec – list codecs that are currently loaded in FreeSWITCH")]),a._v(" "),e("li",[a._v("complete – list command argument completion tables")]),a._v(" "),e("li",[a._v('detailed_bridged_calls – same as "show detailed_calls"')]),a._v(" "),e("li",[a._v('detailed_calls – like "show calls" but with more fields')]),a._v(" "),e("li",[a._v("dialplan – list dialplan interfaces")]),a._v(" "),e("li",[a._v("endpoint – list endpoint interfaces currently available to FS")]),a._v(" "),e("li",[a._v("file – list supported file format interfaces")]),a._v(" "),e("li",[a._v("interface_types – list all interface types with a summary count of each type of interface available")]),a._v(" "),e("li",[a._v("interfaces – enumerate all available interfaces by type, showing the module which exposes each interface")]),a._v(" "),e("li",[a._v("limits – list database limit interfaces")]),a._v(" "),e("li",[a._v("management – list management interfaces")]),a._v(" "),e("li",[a._v("module – enumerate modules and the path to each")]),a._v(" "),e("li",[a._v("nat_map – list Network Address Translation map")]),a._v(" "),e("li",[a._v("registrations – enumerate user extension registrations")]),a._v(" "),e("li",[a._v("say – enumerate available TTS (text-to-speech) interface modules with language supported")]),a._v(" "),e("li",[a._v("tasks – list FS tasks")]),a._v(" "),e("li",[a._v("timer – list timer modules")])])],1)}),[],!1,null,null,null);e.default=l.exports}}]);